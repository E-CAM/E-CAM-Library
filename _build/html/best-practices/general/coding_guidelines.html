<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Coding Guidelines and Code Review &#8212; E-CAM Software Library 0.1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/ecam_logo.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Continuous Integration" href="continuous_integration.html" />
    <link rel="prev" title="Version Control" href="versions.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="continuous_integration.html" title="Continuous Integration"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="versions.html" title="Version Control"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">E-CAM Software Library 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Scientific Software Best Practices</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="general_programming_guidelines.html" accesskey="U">General Programming Guidelines</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="coding-guidelines-and-code-review">
<span id="coding-guidelines"></span><h1>Coding Guidelines and Code Review<a class="headerlink" href="#coding-guidelines-and-code-review" title="Permalink to this headline">¶</a></h1>
<p>While this document can be used as a starting point for coding best practices, it is really intended for those who want
to contribute code to the E-CAM project, and describes the starting point for our coding standards and code review
checklist. We try to adopt best practices from existing projects with plenty of relative experience. <a class="reference internal" href="#pycogent" id="id1">[PyCogent]</a> (for
example) has useful coding guidelines that will act as a starting point for us.</p>
<p>Code, scripts, and documentation should have their spelling checked. All plain-text files should have line widths of 120
characters or less unless that is not supported for the particular file format. It is typical in many projects that a
limit of 80 characters is given but we consider this excessively restrictive.</p>
<table class="docutils citation" frame="void" id="pycogent" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[PyCogent]</a></td><td><a class="reference external" href="http://pycogent.org/coding_guidelines.html">http://pycogent.org/coding_guidelines.html</a></td></tr>
</tbody>
</table>
<div class="section" id="variable-naming">
<h2>Variable naming<a class="headerlink" href="#variable-naming" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Choose the name that people will most likely guess. Make it descriptive, but not too long: <code class="docutils literal"><span class="pre">curr_record</span></code> is better
than <code class="docutils literal"><span class="pre">c</span></code>, or <code class="docutils literal"><span class="pre">curr</span></code>, or <code class="docutils literal"><span class="pre">current_genbank_record_from_database</span></code>.</li>
<li>Good names are hard to find. Don&#8217;t be afraid to change names except when they are part of interfaces that other people
are also using. It may take some time working with the code to come up with reasonable names for everything: if you
have unit tests, its easy to change them, especially with global search and replace.</li>
<li>Use singular names for individual things, plural names for collections. For example, you&#8217;d expect <code class="docutils literal"><span class="pre">self.Name</span></code> to
hold something like a single string, but <code class="docutils literal"><span class="pre">self.Names</span></code> to hold something that you could loop through like a list or
dict. Sometimes the decision can be tricky: is <code class="docutils literal"><span class="pre">self.Index</span></code> an int holding a position, or a dict holding records
keyed by name for easy lookup? If you find yourself wondering these things, the name should probably be changed to
avoid the problem: try <code class="docutils literal"><span class="pre">self.Position</span></code> or <code class="docutils literal"><span class="pre">self.LookUp</span></code>.</li>
<li>Don&#8217;t make the type part of the name. You might want to change the implementation later. Use <code class="docutils literal"><span class="pre">Records</span></code> rather than
<code class="docutils literal"><span class="pre">RecordDict</span></code> or <code class="docutils literal"><span class="pre">RecordList</span></code>, etc. Don&#8217;t use Hungarian Notation either (i.e. where you prefix the name with the
type).</li>
<li>Make the name as precise as possible. If the variable is the name of the input file, call it <code class="docutils literal"><span class="pre">infile_name</span></code>, not
<code class="docutils literal"><span class="pre">input</span></code> or <code class="docutils literal"><span class="pre">file</span></code> (which you shouldn&#8217;t use anyway, since they&#8217;re keywords), and not <code class="docutils literal"><span class="pre">infile</span></code> (because that looks
like it should be a file object, not just its name).</li>
<li>Use <code class="docutils literal"><span class="pre">result</span></code> to store the value that will be returned from a method or function. Use <code class="docutils literal"><span class="pre">data</span></code> for input in cases
where the function or method acts on arbitrary data (e.g. sequence data, or a list of numbers, etc.) unless a more
descriptive name is appropriate.</li>
<li>One-letter variable names should only occur in math functions or as loop iterators with limited scope. Limited scope
covers things like <code class="docutils literal"><span class="pre">for</span> <span class="pre">k</span> <span class="pre">in</span> <span class="pre">keys:</span> <span class="pre">print</span> <span class="pre">k</span></code>, where <code class="docutils literal"><span class="pre">k</span></code> survives only a line or two. Loop iterators should refer to
the variable that they&#8217;re looping through: <code class="docutils literal"><span class="pre">for</span> <span class="pre">k</span> <span class="pre">in</span> <span class="pre">keys,</span> <span class="pre">i</span> <span class="pre">in</span> <span class="pre">items</span></code>, or <code class="docutils literal"><span class="pre">for</span> <span class="pre">key</span> <span class="pre">in</span> <span class="pre">keys,</span> <span class="pre">item</span> <span class="pre">in</span> <span class="pre">items</span></code>. If
the loop is long or there are several 1-letter variables active in the same scope, rename them.</li>
<li>Limit your use of abbreviations. A few well-known abbreviations are OK, but you don&#8217;t want to come back to your code
in 6 months and have to figure out what <code class="docutils literal"><span class="pre">sptxck2</span></code> is. It&#8217;s worth it to spend the extra time typing
<code class="docutils literal"><span class="pre">species_taxon_check_2</span></code>, but that&#8217;s still a horrible name: what&#8217;s check number 1? Far better to go with something
like <code class="docutils literal"><span class="pre">taxon_is_species_rank</span></code> that needs no explanation, especially if the variable is only used once or twice.</li>
</ul>
</div>
<div class="section" id="naming-conventions">
<h2>Naming Conventions<a class="headerlink" href="#naming-conventions" title="Permalink to this headline">¶</a></h2>
<p>It is important to follow the naming conventions because they make it much easier to guess what a name refers to. In
particular, it should be easy to guess what scope a name is defined in, what it refers to, whether it&#8217;s OK to change its
value, and whether its referent is callable. The following rules provide these distinctions.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">lowercase_with_underscore</span></code> for modules and internal variables (including function/method parameters).</li>
<li><code class="docutils literal"><span class="pre">MixedCase</span></code> for classes and public properties, and for factory functions that act like additional constructors for a class.</li>
<li><code class="docutils literal"><span class="pre">mixedCaseExceptFirstWord</span></code> for public methods and functions.</li>
<li><code class="docutils literal"><span class="pre">_lowercase_with_leading_underscore</span></code> for private functions, methods, and properties.</li>
<li><code class="docutils literal"><span class="pre">__lowercase_with_two_leading_underscores</span></code> for private properties and functions that must not be overwritten by a subclass.</li>
<li><code class="docutils literal"><span class="pre">CAPS_WITH_UNDERSCORES</span></code> for named constants.</li>
</ul>
<p>Underscores can be left out if the words read OK run together. <code class="docutils literal"><span class="pre">infile</span></code> and <code class="docutils literal"><span class="pre">outfile</span></code> rather than <code class="docutils literal"><span class="pre">in_file</span></code> and
<code class="docutils literal"><span class="pre">out_file</span></code>; <code class="docutils literal"><span class="pre">infile_name</span></code> and <code class="docutils literal"><span class="pre">outfile_name</span></code> rather than <code class="docutils literal"><span class="pre">in_file_name</span></code> and <code class="docutils literal"><span class="pre">out_file_name</span></code> or <code class="docutils literal"><span class="pre">infilename</span></code>
and <code class="docutils literal"><span class="pre">outfilename</span></code> (getting too long to read effortlessly).</p>
</div>
<div class="section" id="merge-requests">
<h2>Merge Requests<a class="headerlink" href="#merge-requests" title="Permalink to this headline">¶</a></h2>
<p>We want people who contribute back to use a &#8220;branch-hack-pull request&#8221; cycle, the <a class="reference external" href="https://guides.github.com/introduction/flow/">GitHub Flow</a>. Our website contains
greater detail on the exact steps required (at <a class="reference internal" href="../../contributing.html#contributing"><span class="std std-ref">How to contribute?</span></a>) but the basic concept is:</p>
<ul class="simple">
<li>Create your own copy of the repository on the <a class="reference external" href="https://gitlab.e-cam2020.eu/">E-CAM GitLab service</a> (<code class="docutils literal"><span class="pre">fork</span></code>)</li>
<li><code class="docutils literal"><span class="pre">clone</span></code> your repository to your machine</li>
<li>Create a new <code class="docutils literal"><span class="pre">branch</span></code> for your feature. Feature branches should have descriptive names, like <code class="docutils literal"><span class="pre">animated-menu-items</span></code>
or <code class="docutils literal"><span class="pre">issue-#1061</span></code>.</li>
<li>Hack</li>
<li><code class="docutils literal"><span class="pre">push</span></code> your changes back to GitLab</li>
<li>Create a <a class="reference external" href="https://docs.gitlab.com/ee/gitlab-basics/add-merge-request.html">Merge Request</a> <a class="footnote-reference" href="#f1" id="id2">[1]</a> against the
appropriate  of the E-CAM library. This gives other developers an opportunity to review the changes before they become
a part of the main codebase.</li>
</ul>
<p>Code review (see below) is a major benefit of merge requests, but merge requests are actually designed to be a generic way to talk
about code. You can think of merge requests as a discussion dedicated to a particular branch. This means that they can
also be used much earlier in the development process. For example, if a developer needs help with a particular feature,
all they have to do is file a merge request. Interested parties will be notified automatically, and they&#8217;ll be able to
see the question right next to the relevant commits.</p>
</div>
<div class="section" id="code-review-and-checklist">
<h2>Code Review and Checklist<a class="headerlink" href="#code-review-and-checklist" title="Permalink to this headline">¶</a></h2>
<p>Contributors also make good reviewers so we&#8217;d like you to be aware of what the review process looks like. We try to
follow the best practices as described in <a class="reference external" href="http://smartbear.com/SmartBear/media/pdfs/WP-CC-11-Best-Practices-of-Peer-Code-Review.pdf">&#8220;11 Best Practices for Peer Code Review&#8221;</a>. The most important to
mention are:</p>
<ul class="simple">
<li>Merge requests should be small, the target is to review fewer than 400 lines of code at a time.</li>
<li>Authors should document source code before the review.</li>
<li>Embrace the subconscious implications of peer review. The knowledge that others will be examining their work naturally
drives people to produce a better product.</li>
</ul>
<p>Copy and paste the following into a merge request comment when it is ready for review (in our case that will be on
the <a class="reference external" href="https://gitlab.e-cam2020.eu/">E-CAM GitLab service</a>). This lists helps ensure that we try to reach many of our targets in terms of:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>- [ ] Is it mergeable? (i.e., there should be no merge conflicts)
- [ ] Did it pass the tests? (Are there unit/regression tests? Do they pass?)
- [ ] If it introduces new functionality, is it tested? (Unit tests?)
- [ ] Is it well formatted? (typos, line length, brackets,...)
- [ ] Did it change any interfaces? Only additions are allowed without a major version
      increment. Changing file formats also requires a major version number increment.
- [ ] Is the Copyright year up to date?
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">After you submit the comment you can check and uncheck the individual boxes on the formatted comment in
GitLab; no need to put x or y in the middle.</p>
</div>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[1]</a></td><td>Merge requests let you tell others about changes you&#8217;ve pushed to a GitLab repository. Once a merge request is
sent, interested parties can review the set of changes, discuss potential modifications, and even push
follow-up commits if necessary</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/ecam_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Coding Guidelines and Code Review</a><ul>
<li><a class="reference internal" href="#variable-naming">Variable naming</a></li>
<li><a class="reference internal" href="#naming-conventions">Naming Conventions</a></li>
<li><a class="reference internal" href="#merge-requests">Merge Requests</a></li>
<li><a class="reference internal" href="#code-review-and-checklist">Code Review and Checklist</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="versions.html"
                        title="previous chapter">Version Control</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="continuous_integration.html"
                        title="next chapter">Continuous Integration</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/best-practices/general/coding_guidelines.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="continuous_integration.html" title="Continuous Integration"
             >next</a> |</li>
        <li class="right" >
          <a href="versions.html" title="Version Control"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">E-CAM Software Library 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Scientific Software Best Practices</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="general_programming_guidelines.html" >General Programming Guidelines</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, E-CAM Centre of Excellence.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.6.
    </div>
  </body>
</html>