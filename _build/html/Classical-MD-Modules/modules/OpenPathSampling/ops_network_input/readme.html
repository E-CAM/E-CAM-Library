<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Improved input for OPS networks &#8212; E-CAM Software Library 0.1 documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../../../_static/ecam_logo.ico"/>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="New WHAM code" href="../ops_new_wham/readme.html" />
    <link rel="prev" title="Direct MD (on-the-fly) flux/rate in OpenPathSampling" href="../ops_direct_rate_flux/readme.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../ops_new_wham/readme.html" title="New WHAM code"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../ops_direct_rate_flux/readme.html" title="Direct MD (on-the-fly) flux/rate in OpenPathSampling"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">E-CAM Software Library 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" accesskey="U">Classical MD Modules</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="improved-input-for-ops-networks">
<span id="ops-network-input"></span><h1>Improved input for OPS networks<a class="headerlink" href="#improved-input-for-ops-networks" title="Permalink to this headline">¶</a></h1>
<div class="sidebar">
<p class="first sidebar-title">Software Technical Information</p>
<p>The information in this section describes OpenPathSampling as a whole.
Information specific to the additions in this module are in subsequent
sections.</p>
<dl class="last docutils">
<dt>Language</dt>
<dd>Python (2.7)</dd>
<dt>Documentation Tool</dt>
<dd>Sphinx, numpydoc format (ReST)</dd>
<dt>Application Documentation</dt>
<dd><a class="reference external" href="http://openpathsampling.org">http://openpathsampling.org</a></dd>
<dt>Relevant Training Material</dt>
<dd><a class="reference external" href="http://openpathsampling.org/latest/examples/">http://openpathsampling.org/latest/examples/</a></dd>
<dt>Licence</dt>
<dd>LGPL, v. 2.1 or later</dd>
</dl>
</div>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#purpose-of-module" id="id1">Purpose of Module</a></li>
<li><a class="reference internal" href="#background-information" id="id2">Background Information</a></li>
<li><a class="reference internal" href="#testing" id="id3">Testing</a></li>
<li><a class="reference internal" href="#examples" id="id4">Examples</a></li>
<li><a class="reference internal" href="#source-code" id="id5">Source Code</a></li>
</ul>
</div>
<p>Authors: David W.H. Swenson</p>
<p>This module includes modifications to OpenPathSampling that simplify the
setup of transition networks, including providing a method so that extra
information about interfaces can (optionally) be provided on setup in order
to simplify analysis.</p>
<div class="section" id="purpose-of-module">
<h2><a class="toc-backref" href="#id1">Purpose of Module</a><a class="headerlink" href="#purpose-of-module" title="Permalink to this headline">¶</a></h2>
<p>In OpenPathSampling, &#8220;reactions&#8221; (which are often conformational changes)
are represented by objects called <code class="docutils literal"><span class="pre">Transitions</span></code>, and the set of all
reactions of interest is represented by a <code class="docutils literal"><span class="pre">TransitionNetwork</span></code>. The
<code class="docutils literal"><span class="pre">TransitionNetwork</span></code> knows about all the reactions being sampled, as well
as the path ensembles used to sample them. In general, a full reaction
network might involve hundreds of path ensembles, so the
<code class="docutils literal"><span class="pre">TransitionNetwork</span></code> is a factory that creates the ensembles so the user
doesn&#8217;t have to, and also provides conveniences for analysis, such as
grouping the path ensembles according to the reaction they sample.</p>
<p>This module deals with two aspects of transition interface sampling methods.
The first is the interface set, which is the group of interfaces associated
with a given transition. These interfaces are associated with volumes in
phase space. Those volumes are typically defined by a maximum value of some
order parameter, <div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">\lambda</tt>)</p>
latex exited with error
[stderr]

kpathsea: Running mktexfmt latex.fmt
mktexfmt: mktexfmt is using the following fmtutil.cnf files (in precedence order):
mktexfmt:   /usr/share/texmf/web2c/fmtutil.cnf
mktexfmt:   /usr/share/texlive/texmf-dist/web2c/fmtutil.cnf
mktexfmt: mktexfmt is using the following fmtutil.cnf file for writing changes:
mktexfmt:   /home/ffrancesco/.texlive2017/texmf-config/web2c/fmtutil.cnf
mktexfmt [INFO]: writing formats under /home/ffrancesco/.texlive2017/texmf-var/web2c
mktexfmt [INFO]: did not find entry for byfmt=latex, skipped
mktexfmt [INFO]: Not selected formats: 27
mktexfmt [INFO]: Total formats: 27
mktexfmt [INFO]: exiting with status 0

[stdout]
This is pdfTeX, Version 3.14159265-2.6-1.40.18 (TeX Live 2017/Debian) (preloaded format=latex)
 restricted \write18 enabled.
I can&#8217;t find the format file `latex.fmt&#8217;!
</div>
. Knowing this edge value is essential for
calculating rates.</p>
<p>The second aspect is the multiple state outer (MS-outer) interface ensemble.
This is an ensemble used in some variants of multiple state transition
interface sampling to facilitate replica exchange between paths with
different initial states. In practice, this approach is likely to become
less frequently used (there are more efficient approaches to achieve the
same goals), so requiring that the MS-outer interface exist is not very
forward-thinking, although removing entirely is also not the best approach.</p>
<p>Prior to the improvements made in this module, OpenPathSampling suffered from
the following problems:</p>
<ul class="simple">
<li>An interface had no way of knowing what its &#8220;edge&#8221; value was, only whether
a given snapshot was inside it or outside it. This made it difficult to
automatically determined the value at the outermost interface for
calculating the rate. The previous code relied on a hack that assumed that
trajectories in the interface had a relatively low probability of crossing
to another state.</li>
<li>All networks required a multiple state outer interface, even if it wasn&#8217;t
used. This also meant that the outermost interface a user defined was
converted to an MS-outer interface, which could lead to confusion. This
module makes usage much easier to understand.</li>
</ul>
<p>This module changes the setup of interface sets, such that they can identify
their edge values (if it is uniquely identified; the code still works if it
is not unique). This obviates the need for an ugly hack to guess where the
boundary was.</p>
<p>This module also changes the way that the multiple state outer interface is
set up. Now the user must explicitly make a multiple state outer interface
object, which will then make the appropriate MS-outer ensemble. We wanted to
keep the ability to have an MS-outer ensemble. However, we did not want to
require it, because there are, in general, better approaches to accomplish
the same things.</p>
<p>The primary new objects in this module are:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">InterfaceSet</span></code>: replace the previous list of <code class="docutils literal"><span class="pre">Volume</span></code> objects with a
proper set of interfaces, which can be associated with a list of
<code class="docutils literal"><span class="pre">lambdas</span></code>.</li>
<li><code class="docutils literal"><span class="pre">VolumeInterfaceSet</span></code>: subclass of <code class="docutils literal"><span class="pre">InterfaceSet</span></code>, intended to directly
replace the old functions to create several volumes at once. Also has the
ability to automatically create a new interface based on the new value of
the maximum lambda. This also makes it potentially useful in methods where
the interfaces should be treated parametrically, such as adaptive
multilevel splitting.</li>
<li><code class="docutils literal"><span class="pre">MSOuterTISInterface</span></code>: object to create the multiple state outer
interface for transition interface sampling. Mainly allows us to smoothly
transition away from using this sort of object, since there are better
approaches to solve the same problems.</li>
</ul>
</div>
<div class="section" id="background-information">
<h2><a class="toc-backref" href="#id2">Background Information</a><a class="headerlink" href="#background-information" title="Permalink to this headline">¶</a></h2>
<p>This module builds on OpenPathSampling, a Python package for path sampling
simulations. To learn more about OpenPathSampling, you might be interested in
reading:</p>
<ul class="simple">
<li>OPS documentation: <a class="reference external" href="http://openpathsampling.org">http://openpathsampling.org</a></li>
<li>OPS source code: <a class="reference external" href="http://github.com/openpathsampling/openpathsampling">http://github.com/openpathsampling/openpathsampling</a></li>
</ul>
</div>
<div class="section" id="testing">
<h2><a class="toc-backref" href="#id3">Testing</a><a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>Tests in OpenPathSampling use the <a class="reference external" href="http://nose.readthedocs.io/en/latest/">nose</a> package.</p>
<p>This module has been included in the OpenPathSampling core. Its tests can
be run by setting up a developer install of OpenPathSampling and running
the command <code class="docutils literal"><span class="pre">nosetests</span></code> from the root directory of the repository.</p>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id4">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>The first example demonstrates how to use the new classes that have been
incorporated in OpenPathSampling through this module. This includes some of
the new features of interface sets, such as identifying values of lambda and
creating new interfaces based on a desired &#8220;edge&#8221; value, as well as a couple
approaches to building an MS-outer interface, and how to build a
<code class="docutils literal"><span class="pre">TransitionNetwork</span></code> with or without MS-outer interfaces.</p>
<ul class="simple">
<li><a class="reference external" href="https://gitlab.e-cam2020.eu/dwhswenson/ops_additional_examples/blob/master/network_input.ipynb">https://gitlab.e-cam2020.eu/dwhswenson/ops_additional_examples/blob/master/network_input.ipynb</a> [<a class="reference external" href="https://nbviewer.jupyter.org/urls/gitlab.e-cam2020.eu/dwhswenson/ops_additional_examples/raw/master/network_input.ipynb">HTML</a>]</li>
</ul>
<p>The example below links to the official OpenPathSampling documentation. The
notebooks that make up that example can also be found in the
OpenPathSampling GitHub repository.  Note that this example represents the
most recent version of code, and may not be identical to what was included
in the module. The original example is included in the source code, below.
In this second example, usage of this module is illustrated in the context
of a larger example of MSTIS.</p>
<ul class="simple">
<li><a class="reference external" href="http://openpathsampling.org/latest/examples/mstis.html">Multiple State TIS on a Toy Model</a></li>
</ul>
</div>
<div class="section" id="source-code">
<h2><a class="toc-backref" href="#id5">Source Code</a><a class="headerlink" href="#source-code" title="Permalink to this headline">¶</a></h2>
<p>This module has been merged into OpenPathSampling. It is composed of the
following pull requests:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/openpathsampling/openpathsampling/pull/528">https://github.com/openpathsampling/openpathsampling/pull/528</a></li>
<li><a class="reference external" href="https://github.com/openpathsampling/openpathsampling/pull/530">https://github.com/openpathsampling/openpathsampling/pull/530</a></li>
<li><a class="reference external" href="https://github.com/openpathsampling/openpathsampling/pull/538">https://github.com/openpathsampling/openpathsampling/pull/538</a></li>
<li><a class="reference external" href="https://github.com/openpathsampling/openpathsampling/pull/553">https://github.com/openpathsampling/openpathsampling/pull/553</a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../../index.html">
              <img class="logo" src="../../../../_static/ecam_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Improved input for OPS networks</a><ul>
<li><a class="reference internal" href="#purpose-of-module">Purpose of Module</a></li>
<li><a class="reference internal" href="#background-information">Background Information</a></li>
<li><a class="reference internal" href="#testing">Testing</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#source-code">Source Code</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../ops_direct_rate_flux/readme.html"
                        title="previous chapter">Direct MD (on-the-fly) flux/rate in OpenPathSampling</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../ops_new_wham/readme.html"
                        title="next chapter">New WHAM code</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../_sources/Classical-MD-Modules/modules/OpenPathSampling/ops_network_input/readme.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../ops_new_wham/readme.html" title="New WHAM code"
             >next</a> |</li>
        <li class="right" >
          <a href="../ops_direct_rate_flux/readme.html" title="Direct MD (on-the-fly) flux/rate in OpenPathSampling"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">E-CAM Software Library 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" >Classical MD Modules</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, E-CAM Centre of Excellence.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.6.
    </div>
  </body>
</html>