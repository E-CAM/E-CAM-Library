<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Interface Optimization &#8212; E-CAM Software Library 0.1 documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../../../_static/ecam_logo.ico"/>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Spring Shooting in OpenPathSampling" href="../ops_spring_shooting/readme.html" />
    <link rel="prev" title="Maximum likelihood optimization of reaction coordinates" href="../ops_maxlikelihood/readme.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../ops_spring_shooting/readme.html" title="Spring Shooting in OpenPathSampling"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../ops_maxlikelihood/readme.html" title="Maximum likelihood optimization of reaction coordinates"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">E-CAM Software Library 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" accesskey="U">Classical MD Modules</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="interface-optimization">
<span id="ops-interfaceoptimization"></span><h1>Interface Optimization<a class="headerlink" href="#interface-optimization" title="Permalink to this headline">¶</a></h1>
<div class="sidebar">
<p class="first sidebar-title">Software Technical Information</p>
<p>The information in this section describes OpenPathSampling as a whole.
Information specific to the additions in this module are in subsequent
sections.</p>
<dl class="last docutils">
<dt>Language</dt>
<dd>Python (2.7)</dd>
<dt>Documentation Tool</dt>
<dd>Sphinx, numpydoc format (ReST)</dd>
<dt>Application Documentation</dt>
<dd><a class="reference external" href="http://openpathsampling.org">http://openpathsampling.org</a></dd>
<dt>Relevant Training Material</dt>
<dd><a class="reference external" href="http://openpathsampling.org/latest/examples/">http://openpathsampling.org/latest/examples/</a></dd>
<dt>Licence</dt>
<dd>LGPL, v. 2.1 or later</dd>
</dl>
</div>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#purpose-of-module" id="id1">Purpose of Module</a></li>
<li><a class="reference internal" href="#background-information" id="id2">Background Information</a></li>
<li><a class="reference internal" href="#testing" id="id3">Testing</a></li>
<li><a class="reference internal" href="#examples" id="id4">Examples</a></li>
<li><a class="reference internal" href="#source-code" id="id5">Source Code</a></li>
</ul>
</div>
<p>Author: Anastasiia Maslechko</p>
<p>This module consist of functions to evaluate the new values of the interface positions in Transition Interface Sampling (TIS) calculation. Two approaches are implemented (for more details please look in the <a class="reference internal" href="#background-information">Background Information</a>).</p>
<div class="section" id="purpose-of-module">
<h2><a class="toc-backref" href="#id1">Purpose of Module</a><a class="headerlink" href="#purpose-of-module" title="Permalink to this headline">¶</a></h2>
<p>In TIS calculations the full path space is investigated through several ensembles by putting the interfaces. For each interface during the simulation crossing probability is evaluated. At the end the reaction rate depends on the  crossing probabilities obtained from each ensemble. Without a full knowledge of the reaction mechanism and information about free energy profile user most likely fails to set up manually initial setting, which are going to lead to the efficient usage of the software resources, and most importantly to low statistical errors in the simulation run.</p>
<p>One of the challenges in Transition Path Sampling is to define a proper <cite>collective variable</cite> (<cite>CV</cite>). Interface-optimization module is a way to improve code performance within selected <cite>CV</cite>.</p>
</div>
<div class="section" id="background-information">
<h2><a class="toc-backref" href="#id2">Background Information</a><a class="headerlink" href="#background-information" title="Permalink to this headline">¶</a></h2>
<p>This module builds on OpenPathSampling, a Python package for path sampling
simulations. To learn more about OpenPathSampling, you might be interested in
reading:</p>
<ul class="simple">
<li>OPS documentation: <a class="reference external" href="http://openpathsampling.org">http://openpathsampling.org</a></li>
<li>OPS source code: <a class="reference external" href="http://github.com/openpathsampling/openpathsampling">http://github.com/openpathsampling/openpathsampling</a></li>
</ul>
<p>In the Interface Optimization module a search of the optimal set of the interfaces is done in iterative manner. The key idea is described in the papers (please, see the references below), and the goal is to approach almost the same crossing probabilities in each ensemble:</p>
<ul class="simple">
<li>Ernesto E. Borrero and Fernando A. Escobedo. Optimizing the sampling and staging for simulations of rare events via forward flux sampling schemes. The Journal of Chemical Physics 129, 024115 (2008); doi: <a class="reference external" href="http://dx.doi.org/10.1063/1.2953325">http://dx.doi.org/10.1063/1.2953325</a></li>
<li>Ernesto E. Borrero, Marcus Weinwurm, and Christoph Dellago. Optimizing transition interface sampling simulations. The Journal of Chemical Physics 134, 244118 (2011); doi: <a class="reference external" href="http://dx.doi.org/10.1063/1.3601919">http://dx.doi.org/10.1063/1.3601919</a></li>
</ul>
<p>The first thing to do is to start the simulation for some number of cycles with initial guess (set of interfaces). On the basis of the obtained data analysis is done as follows: values of the current interface positions and the &#8220;crossing probabilities&#8221; (these are most likely non-converged values due to the least number of cycles) are used in the interface-optimization calculation. Note: termination of the simulation and getting of the interfaces and crossing probabilities must be done by an experimenter.</p>
<p>The next step is to build a mapping function <cite>f</cite>, which satisfies several properties:</p>
<ol class="arabic simple">
<li>The form of the function helps to &#8220;equalize&#8221; the crossing probabilities on the next simulation run.</li>
<li>It is bijective.</li>
<li>It is monotonic in order to have inverse image.</li>
</ol>
<p>The next step is to find the number of the interfaces (<cite>n_int</cite>) to satisfy users requirements. After that we need to divide a region from the starting point til 1 on the ordinate on the <cite>n_int - 1</cite> intervals: by mapping of the obtained points on the function curve we can get a new set of interfaces.</p>
<div class="figure align-center">
<img alt="Building a mapping function, and obtaining a new set of interface from it." src="../../../../_images/transform_100.png" />
</div>
<p>Important functions implemented in this module:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">find_interface_and_cross</span></code> : reads the output of the analyze-tool after a certain number of cycles (defined by the user). Object like <cite>TISTransition</cite>  must be used as an input.</li>
<li><code class="docutils literal"><span class="pre">save_n_interfaces</span></code> : a method to calculate the new interface positions, using first approach: the number of interfaces kept the same, only the values of their positions are going to be changed.</li>
<li><code class="docutils literal"><span class="pre">save_p_interfaces</span></code> : a method to calculate the new interface positions, using second approach: the number of the interfaces might be changed, &#8220;expected&#8221; crossing probability for each ensemble has a predefined value.</li>
</ul>
</div>
<div class="section" id="testing">
<h2><a class="toc-backref" href="#id3">Testing</a><a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>Tests in OpenPathSampling use the <a class="reference external" href="http://nose.readthedocs.io/en/latest/">nose</a> package.</p>
<p>The tests for this module can be run by downloading its source code (check the section <code class="docutils literal"><span class="pre">Source</span> <span class="pre">Code</span></code> below), installing its requirements, and running the command <code class="docutils literal"><span class="pre">nosetests</span></code> in a root directory (or in particular for the file <code class="docutils literal"><span class="pre">test_interface_optimization.py</span></code>).</p>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id4">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>To check an example look for the file <code class="docutils literal"><span class="pre">toy_mistis_interface_optimization.ipynb</span></code> in the source code (or in the directory <code class="docutils literal"><span class="pre">toy_model_mistis</span></code> from the OPS-examples section). To open it use <code class="docutils literal"><span class="pre">jupyter</span> <span class="pre">notebook</span> <span class="pre">toy_mistis_interface_optimization.ipynb</span></code> (see Jupyter notebook documentation at <a class="reference external" href="http://jupyter.org/">http://jupyter.org/</a> for more details). In order to run it download the data from <a class="reference external" href="http://www.dropbox.com/s/qaeczkugwxkrdfy/toy_mistis_1k_OPS1.nc">http://www.dropbox.com/s/qaeczkugwxkrdfy/toy_mistis_1k_OPS1.nc</a>, as described inside of the example-file.</p>
</div>
<div class="section" id="source-code">
<h2><a class="toc-backref" href="#id5">Source Code</a><a class="headerlink" href="#source-code" title="Permalink to this headline">¶</a></h2>
<p>The source code for this module can be found in: <a class="reference external" href="https://gitlab.e-cam2020.eu:10443/Classical-MD_openpathsampling/Interface">https://gitlab.e-cam2020.eu:10443/Classical-MD_openpathsampling/Interface</a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../../index.html">
              <img class="logo" src="../../../../_static/ecam_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Interface Optimization</a><ul>
<li><a class="reference internal" href="#purpose-of-module">Purpose of Module</a></li>
<li><a class="reference internal" href="#background-information">Background Information</a></li>
<li><a class="reference internal" href="#testing">Testing</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#source-code">Source Code</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../ops_maxlikelihood/readme.html"
                        title="previous chapter">Maximum likelihood optimization of reaction coordinates</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../ops_spring_shooting/readme.html"
                        title="next chapter">Spring Shooting in OpenPathSampling</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../_sources/Classical-MD-Modules/modules/OpenPathSampling/ops_interface_optimization/readme.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../ops_spring_shooting/readme.html" title="Spring Shooting in OpenPathSampling"
             >next</a> |</li>
        <li class="right" >
          <a href="../ops_maxlikelihood/readme.html" title="Maximum likelihood optimization of reaction coordinates"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">E-CAM Software Library 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" >Classical MD Modules</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, E-CAM Centre of Excellence.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.6.
    </div>
  </body>
</html>