<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Contact Map Parallelization &#8212; E-CAM Software Library 0.1 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../../_static/ecam_logo.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Transition State Ensemble in OpenPathSampling" href="../OpenPathSampling/ops_tse/readme.html" />
    <link rel="prev" title="Contact Map" href="../contact_maps/readme.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../OpenPathSampling/ops_tse/readme.html" title="Transition State Ensemble in OpenPathSampling"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../contact_maps/readme.html" title="Contact Map"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">E-CAM Software Library 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Classical MD Modules</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="sidebar">
<p class="first sidebar-title">Software Technical Information</p>
<dl class="last docutils">
<dt>Language</dt>
<dd>Python (2.7, 3.4, 3.5, 3.6)</dd>
<dt>Licence</dt>
<dd>LGPL 2.1 or later</dd>
<dt>Documentation Tool</dt>
<dd>Sphinx/RST</dd>
<dt>Application Documentation</dt>
<dd><a class="reference external" href="http://contact-map.readthedocs.io/">http://contact-map.readthedocs.io/</a></dd>
<dt>Relevant Training Material</dt>
<dd><a class="reference external" href="http://contact-map.readthedocs.io/en/latest/examples.html">http://contact-map.readthedocs.io/en/latest/examples.html</a></dd>
<dt>Software Module Developed by</dt>
<dd>David W.H. Swenson</dd>
</dl>
</div>
<div class="section" id="contact-map-parallelization">
<span id="id1"></span><h1>Contact Map Parallelization<a class="headerlink" href="#contact-map-parallelization" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#purpose-of-module" id="id2">Purpose of Module</a></li>
<li><a class="reference internal" href="#background-information" id="id3">Background Information</a></li>
<li><a class="reference internal" href="#building-and-testing" id="id4">Building and Testing</a></li>
<li><a class="reference internal" href="#source-code" id="id5">Source Code</a></li>
</ul>
</div>
<p>This module adds the ability to parallelize the calculation of contact
frequencies (see the <code class="docutils literal"><span class="pre">contact</span> <span class="pre">map</span></code> module). It includes improvements to the
core of the contact_map package to facilitate parallelization, as well
as integration with a framework for practical parallelization.</p>
<div class="section" id="purpose-of-module">
<h2><a class="toc-backref" href="#id2">Purpose of Module</a><a class="headerlink" href="#purpose-of-module" title="Permalink to this headline">¶</a></h2>
<p>Contacts are defined as when two atoms, or atoms within two groups of atoms
(residues), are within some cutoff distance of each other. The contact map
is the set of all contacts in a given snapshot. The contact frequency is the
fraction of a trajectory in which each pair of contacts is present. The
contact frequency therefore requires calculation of the contact map for each
individual frame in the trajectory.</p>
<p>The original <code class="docutils literal"><span class="pre">contact_map</span></code> code included OpenMP (shared-memory)
parallelization of the calculation of a single contact map (a loop over
atoms). Each contact map in a contact frequency (the loop over the frames of
a trajectory) was done sequentially. However, each frame is completely
independent, and can be processed on a separate node. This module implements
that parallelization.</p>
<p>This module interfaces with the <code class="docutils literal"><span class="pre">dask.distributed</span></code> package for task-based
parallelization. The trajectory is separated into segments, with the
<code class="docutils literal"><span class="pre">dask</span></code> network calculating the contact frequency of each segment in
parallel (reading from a common file source).  Then the partial contact
frequencies are combined into one <code class="docutils literal"><span class="pre">ContactFrequency</span></code> object. This also
includes methods, such as serialization into JSON strings, that would be
useful for parallelization by other tools.</p>
</div>
<div class="section" id="background-information">
<h2><a class="toc-backref" href="#id3">Background Information</a><a class="headerlink" href="#background-information" title="Permalink to this headline">¶</a></h2>
<p>This is part of the <a class="reference external" href="http://contact-map.readthedocs.io/">contact map</a>
package, which in turn builds on tools in <a class="reference external" href="http://mdtraj.org">MDTraj</a>.</p>
<p>The parallelization is based on <a class="reference external" href="https://distributed.readthedocs.io/"><code class="docutils literal"><span class="pre">dask.distributed</span></code></a>. See its docs for
details on setting up a dask scheduler/worker network.</p>
</div>
<div class="section" id="building-and-testing">
<h2><a class="toc-backref" href="#id4">Building and Testing</a><a class="headerlink" href="#building-and-testing" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">contact_map</span></code> package can be installed with conda, using <code class="docutils literal"><span class="pre">conda</span>
<span class="pre">install</span> <span class="pre">-c</span> <span class="pre">conda-forge</span> <span class="pre">contact_map</span></code>. This module is included in version
<code class="docutils literal"><span class="pre">0.3.0</span></code>, which can be specifically installed with <code class="docutils literal"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">-c</span>
<span class="pre">conda-forge</span> <span class="pre">contact_map==0.3.0</span></code>.</p>
<p><code class="docutils literal"><span class="pre">dask.distibuted</span></code> must be installed separately, which can be done with
<code class="docutils literal"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">-c</span> <span class="pre">conda-forge</span> <span class="pre">dask</span> <span class="pre">distributed</span></code>.</p>
<p>Tests for this module can be run with pytest. Install pytest with <code class="docutils literal"><span class="pre">pip</span>
<span class="pre">install</span> <span class="pre">pytest</span></code> and then run the command <code class="docutils literal"><span class="pre">py.test</span></code> from within the
directory with the source code, or <code class="docutils literal"><span class="pre">py.test</span> <span class="pre">--pyargs</span> <span class="pre">contact_map</span></code> from
anywhere after installation. Tests specific to integration with
<code class="docutils literal"><span class="pre">dask.distributed</span></code> will be marked as &#8220;skipped&#8221; if that framework is
not installed.</p>
</div>
<div class="section" id="source-code">
<h2><a class="toc-backref" href="#id5">Source Code</a><a class="headerlink" href="#source-code" title="Permalink to this headline">¶</a></h2>
<p>This module is composed of the following pull requests in the
<code class="docutils literal"><span class="pre">contact_map</span></code> repository:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/dwhswenson/contact_map/pull/3">https://github.com/dwhswenson/contact_map/pull/3</a></li>
<li><a class="reference external" href="https://github.com/dwhswenson/contact_map/pull/29">https://github.com/dwhswenson/contact_map/pull/29</a></li>
<li><a class="reference external" href="https://github.com/dwhswenson/contact_map/pull/30">https://github.com/dwhswenson/contact_map/pull/30</a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/ecam_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Contact Map Parallelization</a><ul>
<li><a class="reference internal" href="#purpose-of-module">Purpose of Module</a></li>
<li><a class="reference internal" href="#background-information">Background Information</a></li>
<li><a class="reference internal" href="#building-and-testing">Building and Testing</a></li>
<li><a class="reference internal" href="#source-code">Source Code</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../contact_maps/readme.html"
                        title="previous chapter">Contact Map</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../OpenPathSampling/ops_tse/readme.html"
                        title="next chapter">Transition State Ensemble in OpenPathSampling</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/Classical-MD-Modules/modules/contact_maps_parallelization/readme.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../OpenPathSampling/ops_tse/readme.html" title="Transition State Ensemble in OpenPathSampling"
             >next</a> |</li>
        <li class="right" >
          <a href="../contact_maps/readme.html" title="Contact Map"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">E-CAM Software Library 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Classical MD Modules</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, E-CAM Centre of Excellence.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.6.
    </div>
  </body>
</html>