<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Openmpbeads &#8212; E-CAM Software Library 0.1 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../../_static/ecam_logo.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Meso- and Multi-scale Modules" href="../../../Meso-Multi-Scale-Modelling-Modules/index.html" />
    <link rel="prev" title="AuxMod" href="../AuxMod/readme.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../Meso-Multi-Scale-Modelling-Modules/index.html" title="Meso- and Multi-scale Modules"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../AuxMod/readme.html" title="AuxMod"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">E-CAM Software Library 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Quantum Dynamics Modules</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="openmpbeads">
<span id="id1"></span><h1>Openmpbeads<a class="headerlink" href="#openmpbeads" title="Permalink to this headline">¶</a></h1>
<div class="sidebar">
<p class="first sidebar-title">Software Technical Information</p>
<dl class="last docutils">
<dt>Language</dt>
<dd>Fortran 90/95</dd>
<dt>Licence</dt>
<dd>MIT license (MIT)</dd>
<dt>Documentation Tool</dt>
<dd>Doxygen</dd>
<dt>Software Module Developed by</dt>
<dd>Przemyslaw Juda, Momir Mališ</dd>
</dl>
</div>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#purpose-of-module" id="id2">Purpose of Module</a></li>
<li><a class="reference internal" href="#compiling" id="id3">Compiling</a></li>
<li><a class="reference internal" href="#testing" id="id4">Testing</a></li>
<li><a class="reference internal" href="#source-code" id="id5">Source Code</a></li>
<li><a class="reference internal" href="#source-code-documentation" id="id6">Source Code Documentation</a></li>
</ul>
</div>
<div class="section" id="purpose-of-module">
<h2><a class="toc-backref" href="#id2">Purpose of Module</a><a class="headerlink" href="#purpose-of-module" title="Permalink to this headline">¶</a></h2>
<p>Sampling of quantum properties is performed via the so-called classical isomorphism of path integral.
In this scheme , a quantum degree of freedom is mapped into a classical polymer with a certain number of beads.
This number of beads increases with the relevance of quantum effects and can become very large.
Because in the sampling procedure, generally, for each polymer bead a potential energy evaluation is required
within a single sampling step, polymer sampling subroutines become a bottleneck.
<strong>Openmpbeads</strong> is a patch to the <a class="reference internal" href="../PaPIM/readme.html#papim"><span class="std std-ref">PaPIM</span></a> code which increases the code&#8217;s performance by parallelizing the polymer chain
sampling subroutines.
The module introduces the OpenMP parallelization loops for the polymer sampling subroutines.
In this way, a considerable increase of performance can be achieved.</p>
</div>
<div class="section" id="compiling">
<h2><a class="toc-backref" href="#id3">Compiling</a><a class="headerlink" href="#compiling" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../PaPIM/readme.html#papim"><span class="std std-ref">PaPIM</span></a> program source code (for PaPIM download see <a class="reference internal" href="../PaPIM/readme.html#papim"><span class="std std-ref">here</span></a>) and
<a class="reference external" href="https://git-scm.com/">Git</a> should be available.
The downloaded Openmpbeads patch should be placed in the PaPIM main directory,
and applied to the PaPIM source code by executing the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">apply</span> <span class="n">openmpbeads</span><span class="o">.</span><span class="n">patch</span>
</pre></div>
</div>
<p>After the patch has been successfully applied, the OpenMP parallelized PaPIM code can be re-compiled as described
in the PaPIM <a class="reference internal" href="../PaPIM/readme.html#papim"><span class="std std-ref">documentation</span></a>.</p>
</div>
<div class="section" id="testing">
<h2><a class="toc-backref" href="#id4">Testing</a><a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>The successful Openmpbeads patch application and compilation should be verified by executing the
codes standard tests.
The code&#8217;s tests are located in the directory <code class="docutils literal"><span class="pre">./tests</span></code>.
The same set of tests as for the verification of the PaPIM code is executed, but now
with the addition of utilizing OpenMP parallelization. Thus a number of processor cores available for the test
should be at least two.
For details of the PaPIM code standard tests see <a class="reference internal" href="../PaPIM/readme.html#papim"><span class="std std-ref">here</span></a>.
Before running the tests the code has to be properly compiled by running the <code class="docutils literal"><span class="pre">make</span></code> command in the
<code class="docutils literal"><span class="pre">./source</span></code> sub-directory (see compilation of PaPIM code <a class="reference internal" href="../PaPIM/readme.html#papim"><span class="std std-ref">here</span></a>).
The <code class="docutils literal"><span class="pre">numdiff</span></code> package is used for automatic comparison purposes and should be made available before running the tests,
otherwise the <code class="docutils literal"><span class="pre">diff</span></code> command will be used automatically instead but the user is warned that the test might fail
due to small numerical differences.
The tests are performed automatically by executing the following command in the <code class="docutils literal"><span class="pre">./tests</span></code> sub-directory:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">tests</span>

<span class="o">./</span><span class="n">test</span><span class="o">.</span><span class="n">sh</span> <span class="o">-</span><span class="n">m</span> <span class="p">[</span><span class="n">number</span> <span class="n">of</span> <span class="n">MPI</span> <span class="n">cores</span><span class="p">]</span> <span class="o">-</span><span class="n">o</span> <span class="p">[</span><span class="n">number</span> <span class="n">of</span> <span class="n">OpenMP</span> <span class="n">cores</span><span class="p">]</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">[number</span> <span class="pre">of</span> <span class="pre">MPI</span> <span class="pre">cores]</span></code> should not exceed 20, and the <code class="docutils literal"><span class="pre">[number</span> <span class="pre">of</span> <span class="pre">OpenMP</span> <span class="pre">cores]</span></code> should not exceed 5.
The product of <code class="docutils literal"><span class="pre">[number</span> <span class="pre">of</span> <span class="pre">MPI</span> <span class="pre">cores]</span></code> and <code class="docutils literal"><span class="pre">[number</span> <span class="pre">of</span> <span class="pre">OpenMP</span> <span class="pre">cores]</span></code> should not exceed to the total number
of available cores on the system and should also not exceed number 100.
Due to small numerical discrepancies between generated outputs and reference values which can cause the tests to fail,
the user is advised to manually examine the numerical differences between generated output and the corresponding
reference values in case the tests fail.</p>
</div>
<div class="section" id="source-code">
<h2><a class="toc-backref" href="#id5">Source Code</a><a class="headerlink" href="#source-code" title="Permalink to this headline">¶</a></h2>
<p>The Openmpbeads module patch is located at: <a class="reference external" href="https://gitlab.e-cam2020.eu/Quantum-Dynamics/PIM/tree/openmpbeads">https://gitlab.e-cam2020.eu/Quantum-Dynamics/PIM/tree/openmpbeads</a>.</p>
</div>
<div class="section" id="source-code-documentation">
<h2><a class="toc-backref" href="#id6">Source Code Documentation</a><a class="headerlink" href="#source-code-documentation" title="Permalink to this headline">¶</a></h2>
<p>The Openmpbeads patch also adds additional description to the PaPIM code&#8217;s documentation.
Details how to access and generate PaPIM documentation are given <a class="reference internal" href="../PaPIM/readme.html#papim"><span class="std std-ref">here</span></a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/ecam_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Openmpbeads</a><ul>
<li><a class="reference internal" href="#purpose-of-module">Purpose of Module</a></li>
<li><a class="reference internal" href="#compiling">Compiling</a></li>
<li><a class="reference internal" href="#testing">Testing</a></li>
<li><a class="reference internal" href="#source-code">Source Code</a></li>
<li><a class="reference internal" href="#source-code-documentation">Source Code Documentation</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../AuxMod/readme.html"
                        title="previous chapter">AuxMod</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../../../Meso-Multi-Scale-Modelling-Modules/index.html"
                        title="next chapter">Meso- and Multi-scale Modules</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/Quantum-Dynamics-Modules/modules/Openmpbeads/readme.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../Meso-Multi-Scale-Modelling-Modules/index.html" title="Meso- and Multi-scale Modules"
             >next</a> |</li>
        <li class="right" >
          <a href="../AuxMod/readme.html" title="AuxMod"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">E-CAM Software Library 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Quantum Dynamics Modules</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, E-CAM Centre of Excellence.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.6.
    </div>
  </body>
</html>